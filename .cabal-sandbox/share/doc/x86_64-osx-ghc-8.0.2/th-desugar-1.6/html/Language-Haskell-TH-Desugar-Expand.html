<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Language.Haskell.TH.Desugar.Expand</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Language-Haskell-TH-Desugar-Expand.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">th-desugar-1.6: Functions to desugar Template Haskell</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(C) 2014 Richard Eisenberg</td></tr><tr><th>License</th><td>BSD-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>Richard Eisenberg (eir@cis.upenn.edu)</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.Haskell.TH.Desugar.Expand</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Expand synonyms soundly</a></li><li><a href="#g:2">Expand synonyms potentially unsoundly</a></li><li><a href="#g:3">Capture-avoiding substitution</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Expands type synonyms and type families in desugared types.
 See also the package th-expand-syns for doing this to
 non-desugared types.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:expand">expand</a> :: (<a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Data.html#t:Data">Data</a> a) =&gt; a -&gt; q a</li><li class="src short"><a href="#v:expandType">expandType</a> :: <a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q =&gt; <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> -&gt; q <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a></li><li class="src short"><a href="#v:expandUnsoundly">expandUnsoundly</a> :: (<a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Data.html#t:Data">Data</a> a) =&gt; a -&gt; q a</li><li class="src short"><a href="#v:substTy">substTy</a> :: <a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/containers-0.5.7.1/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/template-haskell-2.11.1.0/Language-Haskell-TH-Syntax.html#t:Name">Name</a> <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> -&gt; <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> -&gt; q <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a></li></ul></div><div id="interface"><h1 id="g:1">Expand synonyms soundly</h1><div class="top"><p class="src"><a id="v:expand" class="def">expand</a> :: (<a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Data.html#t:Data">Data</a> a) =&gt; a -&gt; q a <a href="#v:expand" class="selflink">#</a></p><div class="doc"><p>Expand all type synonyms and type families in the desugared abstract
 syntax tree provided, where type family simplification is on a &quot;best effort&quot;
 basis. Normally, the first parameter should have a type like
 <code><a href="Language-Haskell-TH-Desugar.html#t:DExp">DExp</a></code> or <code><a href="Language-Haskell-TH-Desugar.html#t:DLetDec">DLetDec</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:expandType" class="def">expandType</a> :: <a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q =&gt; <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> -&gt; q <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> <a href="#v:expandType" class="selflink">#</a></p><div class="doc"><p>Expands all type synonyms in a desugared type. Also expands open type family
 applications, as long as the arguments have no free variables. Attempts to
 expand closed type family applications, but aborts the moment it spots anything
 strange, like a nested type family application or type variable.</p></div></div><h1 id="g:2">Expand synonyms potentially unsoundly</h1><div class="top"><p class="src"><a id="v:expandUnsoundly" class="def">expandUnsoundly</a> :: (<a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Data.html#t:Data">Data</a> a) =&gt; a -&gt; q a <a href="#v:expandUnsoundly" class="selflink">#</a></p><div class="doc"><p>Expand all type synonyms and type families in the desugared abstract
 syntax tree provided, where type family simplification is on a &quot;better
 than best effort&quot; basis. This means that it will try so hard that it will
 sometimes do the wrong thing. Specifically, any kind parameters to type
 families are ignored. So, if we have</p><pre>type family F (x :: k) where
  F (a :: *) = Int</pre><p><code><a href="Language-Haskell-TH-Desugar-Expand.html#v:expandUnsoundly">expandUnsoundly</a></code> will expand <code>F 'True</code> to <code>Int</code>, ignoring that the
 expansion should only work for type of kind <code>*</code>.</p><p>This function is useful because plain old <code><a href="Language-Haskell-TH-Desugar-Expand.html#v:expand">expand</a></code> will simply fail
 to expand type families that make use of kinds. Sometimes, the kinds
 are benign and we want to expand anyway. Use this function in that case.</p></div></div><h1 id="g:3">Capture-avoiding substitution</h1><div class="top"><p class="src"><a id="v:substTy" class="def">substTy</a> :: <a href="Language-Haskell-TH-Desugar.html#t:DsMonad">DsMonad</a> q =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/containers-0.5.7.1/Data-Map-Lazy.html#t:Map">Map</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/template-haskell-2.11.1.0/Language-Haskell-TH-Syntax.html#t:Name">Name</a> <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> -&gt; <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> -&gt; q <a href="Language-Haskell-TH-Desugar.html#t:DType">DType</a> <a href="#v:substTy" class="selflink">#</a></p><div class="doc"><p>Capture-avoiding substitution on types</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>