<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CLaSH.Prelude.Explicit.Safe</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_CLaSH-Prelude-Explicit-Safe.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">clash-prelude-0.11: CAES Language for Synchronous Hardware - Prelude library</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(C) 2013-2016 University of Twente</td></tr><tr><th>License</th><td>BSD2 (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>Christiaan Baaij &lt;christiaan.baaij@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr><tr><th>Extensions</th><td><ul class="extension-list"><li>DataKinds</li><li>FlexibleContexts</li><li>TypeOperators</li><li>ExplicitNamespaces</li></ul></td></tr></table><p class="caption">CLaSH.Prelude.Explicit.Safe</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Creating synchronous sequential circuits</a></li><li><a href="#g:2">Synchronizer circuits for safe clock domain crossing</a></li><li><a href="#g:3">ROMs</a></li><li><a href="#g:4">RAM primitives with a combinational read port</a></li><li><a href="#g:5">BlockRAM primitives</a></li><li><a href="#g:6">Utility functions</a></li><li><a href="#g:7">Exported modules</a><ul><li><a href="#g:8">Explicitly clocked synchronous signals</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p><strong>This is the <a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/safe-haskell.html">Safe</a> API only of <a href="CLaSH-Prelude-Explicit.html">CLaSH.Prelude.Explicit</a></strong></p><p>This module defines the explicitly clocked counterparts of the functions
defined in <a href="CLaSH-Prelude.html">CLaSH.Prelude</a>.</p><p>This module uses the explicitly clocked <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> synchronous signals, as
opposed to the implicitly clocked <code>Signal</code> used in <a href="CLaSH-Prelude.html">CLaSH.Prelude</a>. Take a
look at <a href="CLaSH-Signal-Explicit.html">CLaSH.Signal.Explicit</a> to see how you can make multi-clock designs
using explicitly clocked signals.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:mealy-39-">mealy'</a> :: <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; (s -&gt; i -&gt; (s, o)) -&gt; s -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk i -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk o</li><li class="src short"><a href="#v:mealyB-39-">mealyB'</a> :: (<a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> i, <a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> o) =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; (s -&gt; i -&gt; (s, o)) -&gt; s -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk i -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk o</li><li class="src short"><a href="#v:moore-39-">moore'</a> :: <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; (s -&gt; i -&gt; s) -&gt; (s -&gt; o) -&gt; s -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk i -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk o</li><li class="src short"><a href="#v:mooreB-39-">mooreB'</a> :: (<a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> i, <a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> o) =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; (s -&gt; i -&gt; s) -&gt; (s -&gt; o) -&gt; s -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk i -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk o</li><li class="src short"><a href="#v:registerB-39-">registerB'</a> :: <a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> a =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk a -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk a</li><li class="src short"><a href="#v:dualFlipFlopSynchronizer">dualFlipFlopSynchronizer</a> :: <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk1 -&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk2 -&gt; a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk1 a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk2 a</li><li class="src short"><a href="#v:asyncFIFOSynchronizer">asyncFIFOSynchronizer</a> :: 2 <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:-60--61-">&lt;=</a> addrSize =&gt; <a href="CLaSH-Promoted-Nat.html#t:SNat">SNat</a> addrSize -&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> wclk -&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> rclk -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (<a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk a, <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a>)</li><li class="src short"><a href="#v:rom-39-">rom'</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Enum">Enum</a> addr) =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> n a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk addr -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><a href="#v:romPow2-39-">romPow2'</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> (2 <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:-94-">^</a> n) a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><a href="#v:asyncRam-39-">asyncRam'</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Enum">Enum</a> addr =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> wclk -&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> rclk -&gt; <a href="CLaSH-Promoted-Nat.html#t:SNat">SNat</a> n -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk addr -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (addr, a)) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk a</li><li class="src short"><a href="#v:asyncRamPow2-39-">asyncRamPow2'</a> :: <span class="keyword">forall</span> wclk rclk n a. <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> wclk -&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> rclk -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n, a)) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk a</li><li class="src short"><a href="#v:blockRam-39-">blockRam'</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Enum">Enum</a> addr) =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> n a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk addr -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (addr, a)) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><a href="#v:blockRamPow2-39-">blockRamPow2'</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> (2 <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:-94-">^</a> n) a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n, a)) -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><a href="#v:isRising-39-">isRising'</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Bounded">Bounded</a> a, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> a) =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:isFalling-39-">isFalling'</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Bounded">Bounded</a> a, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> a) =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short">module <a href="CLaSH-Signal-Explicit.html">CLaSH.Signal.Explicit</a></li></ul></div><div id="interface"><h1 id="g:1">Creating synchronous sequential circuits</h1><div class="top"><p class="src"><a id="v:mealy-39-" class="def">mealy'</a> <a href="#v:mealy-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc"><p><code>Clock</code> to synchronize to</p></td></tr><tr><td class="src">-&gt; (s -&gt; i -&gt; (s, o))</td><td class="doc"><p>Transfer function in mealy machine form:
 <code>state -&gt; input -&gt; (newstate,output)</code></p></td></tr><tr><td class="src">-&gt; s</td><td class="doc"><p>Initial state</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk i -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk o</td><td class="doc"><p>Synchronous sequential function with input and output matching that
 of the mealy machine</p></td></tr></table></div><div class="doc"><p>Create a synchronous function from a combinational function describing
 a mealy machine</p><pre>mac :: Int        -- Current state
    -&gt; (Int,Int)  -- Input
    -&gt; (Int,Int)  -- (Updated state, output)
mac s (x,y) = (s',s)
  where
    s' = x * y + s

type ClkA = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;A&quot; 100

clkA :: <code><a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a></code> ClkA
clkA = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

topEntity :: <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA (Int, Int) -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA Int
topEntity = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealy-39-">mealy'</a></code> clkA mac 0
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>simulate topEntity [(1,1),(2,2),(3,3),(4,4)]
</code></strong>[0,1,5,14...
...
</pre><p>Synchronous sequential functions can be composed just like their
 combinational counterpart:</p><pre>dualMac :: (<code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA100 Int, <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA100 Int)
        -&gt; (<code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA100 Int, <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA100 Int)
        -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA100 Int
dualMac (a,b) (x,y) = s1 + s2
  where
    s1 = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealy-39-">mealy'</a></code> clkA100 mac 0 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clkA100 (a,x))
    s2 = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealy-39-">mealy'</a></code> clkA100 mac 0 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clkA100 (b,y))
</pre></div></div><div class="top"><p class="src"><a id="v:mealyB-39-" class="def">mealyB'</a> <a href="#v:mealyB-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> i, <a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> o)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (s -&gt; i -&gt; (s, o))</td><td class="doc"><p>Transfer function in mealy machine form:
 <code>state -&gt; input -&gt; (newstate,output)</code></p></td></tr><tr><td class="src">-&gt; s</td><td class="doc"><p>Initial state</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk i -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk o</td><td class="doc"><p>Synchronous sequential function with input and output matching that
 of the mealy machine</p></td></tr></table></div><div class="doc"><p>A version of <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealy-39-">mealy'</a></code> that does automatic <code><a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a></code>ing</p><p>Given a function <code>f</code> of type:</p><pre><strong>f</strong> :: Int -&gt; (Bool,Int) -&gt; (Int,(Int,Bool))
</pre><p>When we want to make compositions of <code>f</code> in <code>g</code> using <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealy-39-">mealy'</a></code>, we have to
 write:</p><pre>g clk a b c = (b1,b2,i2)
  where
    (i1,b1) = <code><a href="CLaSH-Signal-Explicit.html#v:unbundle-39-">unbundle'</a></code> clk (mealy' clk f 0 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clk (a,b)))
    (i2,b2) = <code><a href="CLaSH-Signal-Explicit.html#v:unbundle-39-">unbundle'</a></code> clk (mealy' clk f 3 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clk (i1,c)))
</pre><p>Using <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealyB-39-">mealyB'</a></code> however we can write:</p><pre>g clk a b c = (b1,b2,i2)
  where
    (i1,b1) = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealyB-39-">mealyB'</a></code> clk f 0 (a,b)
    (i2,b2) = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mealyB-39-">mealyB'</a></code> clk f 3 (i1,c)
</pre></div></div><div class="top"><p class="src"><a id="v:moore-39-" class="def">moore'</a> <a href="#v:moore-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc"><p><code>Clock</code> to synchronize to</p></td></tr><tr><td class="src">-&gt; (s -&gt; i -&gt; s)</td><td class="doc"><p>Transfer function in moore machine form:
 <code>state -&gt; input -&gt; newstate</code></p></td></tr><tr><td class="src">-&gt; (s -&gt; o)</td><td class="doc"><p>Output function in moore machine form:
 <code>state -&gt; output</code></p></td></tr><tr><td class="src">-&gt; s</td><td class="doc"><p>Initial state</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk i -&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk o</td><td class="doc"><p>Synchronous sequential function with input and output matching that
 of the moore machine</p></td></tr></table></div><div class="doc"><p>Create a synchronous function from a combinational function describing
 a moore machine</p><pre>mac :: Int        -- Current state
    -&gt; (Int,Int)  -- Input
    -&gt; (Int,Int)  -- Updated state
mac s (x,y) = x * y + s

type ClkA = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;A&quot; 100

clkA :: <code><a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a></code> ClkA
clkA = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

topEntity :: <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA (Int, Int) -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA Int
topEntity = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:moore-39-">moore'</a></code> clkA mac id 0
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>simulate topEntity [(1,1),(2,2),(3,3),(4,4)]
</code></strong>[0,1,5,14...
...
</pre><p>Synchronous sequential functions can be composed just like their
 combinational counterpart:</p><pre>dualMac :: (<code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA Int, <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA Int)
        -&gt; (<code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA Int, <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA Int)
        -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> clkA Int
dualMac (a,b) (x,y) = s1 + s2
  where
    s1 = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:moore-39-">moore'</a></code> clkA mac id 0 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clkA (a,x))
    s2 = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:moore-39-">moore'</a></code> clkA mac id 0 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clkA (b,y))
</pre></div></div><div class="top"><p class="src"><a id="v:mooreB-39-" class="def">mooreB'</a> <a href="#v:mooreB-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> i, <a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> o)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; (s -&gt; i -&gt; s)</td><td class="doc"><p>Transfer function in moore machine form:
 <code>state -&gt; input -&gt; newstate</code></p></td></tr><tr><td class="src">-&gt; (s -&gt; o)</td><td class="doc"><p>Output function in moore machine form:
 <code>state -&gt; output</code></p></td></tr><tr><td class="src">-&gt; s</td><td class="doc"><p>Initial state</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk i -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk o</td><td class="doc"><p>Synchronous sequential function with input and output matching that
 of the moore machine</p></td></tr></table></div><div class="doc"><p>A version of <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:moore-39-">moore'</a></code> that does automatic <code><a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a></code>ing</p><p>Given a functions <code>t</code> and <code>o</code> of types:</p><pre><strong>t</strong> :: Int -&gt; (Bool, Int) -&gt; Int
<strong>o</strong> :: Int -&gt; (Int, Bool)
</pre><p>When we want to make compositions of <code>t</code> and <code>o</code> in <code>g</code> using <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:moore-39-">moore'</a></code>, we have to
 write:</p><pre>g clk a b c = (b1,b2,i2)
  where
    (i1,b1) = <code><a href="CLaSH-Signal-Explicit.html#v:unbundle-39-">unbundle'</a></code> clk (moore' clk t o 0 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clk (a,b)))
    (i2,b2) = <code><a href="CLaSH-Signal-Explicit.html#v:unbundle-39-">unbundle'</a></code> clk (moore' clk t o 3 (<code><a href="CLaSH-Signal-Explicit.html#v:bundle-39-">bundle'</a></code> clk (i1,c)))
</pre><p>Using <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mooreB-39-">mooreB'</a></code> however we can write:</p><pre>g clk a b c = (b1,b2,i2)
  where
    (i1,b1) = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mooreB-39-">mooreB'</a></code> clk t o 0 (a,b)
    (i2,b2) = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:mooreB-39-">mooreB'</a></code> clk to 3 (i1,c)
</pre></div></div><div class="top"><p class="src"><a id="v:registerB-39-" class="def">registerB'</a> :: <a href="CLaSH-Signal-Bundle.html#t:Bundle">Bundle</a> a =&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk a -&gt; <a href="CLaSH-Signal-Bundle.html#t:Unbundled-39-">Unbundled'</a> clk a <a href="#v:registerB-39-" class="selflink">#</a></p><div class="doc"><p>Create a <code>register</code> function for product-type like signals (e.g.
 <code>(<code>Signal</code> a, <code>Signal</code> b)</code>)</p><pre>type ClkA = <code><a href="CLaSH-Signal-Internal.html#v:Clk">Clk</a></code> &quot;A&quot; 100

clkA :: <code><a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a></code> ClkA
clkA = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

rP :: (<code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA Int, <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA Int) -&gt; (<code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA Int, <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA Int)
rP = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:registerB-39-">registerB'</a></code> clkA (8,8)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>simulateB rP [(1,1),(2,2),(3,3)] :: [(Int,Int)]
</code></strong>[(8,8),(1,1),(2,2),(3,3)...
...
</pre></div></div><h1 id="g:2">Synchronizer circuits for safe clock domain crossing</h1><div class="top"><p class="src"><a id="v:dualFlipFlopSynchronizer" class="def">dualFlipFlopSynchronizer</a> <a href="#v:dualFlipFlopSynchronizer" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk1</td><td class="doc"><p><code>Clock</code> to which the incoming
 data is synchronised</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk2</td><td class="doc"><p><code>Clock</code> to which the outgoing
 data is synchronised</p></td></tr><tr><td class="src">-&gt; a</td><td class="doc"><p>Initial value of the two
 synchronisation registers</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk1 a</td><td class="doc"><p>Incoming data</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk2 a</td><td class="doc"><p>Outgoing, synchronised, data</p></td></tr></table></div><div class="doc"><p>Synchroniser based on two sequentially connected flip-flops.</p><ul><li><strong>NB</strong>: This synchroniser can be used for <strong>bit</strong>-synchronization.</li><li><p><strong>NB</strong>: Although this synchroniser does reduce metastability, it does
  not guarantee the proper synchronisation of a whole <strong>word</strong>. For
  example, given that the output is sampled twice as fast as the input is
  running, and we have two samples in the input stream that look like:</p><pre>[0111,1000]</pre><p>But the circuit driving the input stream has a longer propagation delay
on <strong>msb</strong> compared to the <strong>lsb</strong>s. What can happen is an output stream
that looks like this:</p><pre>[0111,0111,0000,1000]</pre><p>Where the level-change of the <strong>msb</strong> was not captured, but the level
change of the <strong>lsb</strong>s were.</p><p>If you want to have <em>safe</em> <strong>word</strong>-synchronisation use
<code><a href="CLaSH-Prelude-Explicit-Safe.html#v:asyncFIFOSynchronizer">asyncFIFOSynchronizer</a></code>.</p></li></ul></div></div><div class="top"><p class="src"><a id="v:asyncFIFOSynchronizer" class="def">asyncFIFOSynchronizer</a> <a href="#v:asyncFIFOSynchronizer" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: 2 <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:-60--61-">&lt;=</a> addrSize</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Promoted-Nat.html#t:SNat">SNat</a> addrSize</td><td class="doc"><p>Size of the internally used addresses, the
 FIFO contains <code>2^addrSize</code> elements.</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> wclk</td><td class="doc"><p><code>Clock</code> to which the write port is synchronised</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> rclk</td><td class="doc"><p><code>Clock</code> to which the read port is synchronised</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Read request</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</td><td class="doc"><p>Element to insert</p></td></tr><tr><td class="src">-&gt; (<a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk a, <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a>)</td><td class="doc"><p>(Oldest element in the FIFO, <code>empty</code> flag, <code>full</code> flag)</p></td></tr></table></div><div class="doc"><p>Synchroniser implemented as a FIFO around an asynchronous RAM. Based on the
 design described in <a href="CLaSH-Tutorial.html#multiclock">CLaSH.Tutorial</a>, which is itself based on the
 design described in <a href="http://www.sunburst-design.com/papers/CummingsSNUG2002SJ_FIFO1.pdf">http://www.sunburst-design.com/papers/CummingsSNUG2002SJ_FIFO1.pdf</a>.</p><p><strong>NB</strong>: This synchroniser can be used for <strong>word</strong>-synchronization.</p></div></div><h1 id="g:3">ROMs</h1><div class="top"><p class="src"><a id="v:rom-39-" class="def">rom'</a> <a href="#v:rom-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Enum">Enum</a> addr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc"><p><code>Clock</code> to synchronize to</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> n a</td><td class="doc"><p>ROM content</p><p><strong>NB:</strong> must be a constant</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk addr</td><td class="doc"><p>Read address <code>rd</code></p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</td><td class="doc"><p>The value of the ROM at address <code>rd</code> from the previous clock cycle</p></td></tr></table></div><div class="doc"><p>A ROM with a synchronous read port, with space for <code>n</code> elements</p><ul><li><strong>NB</strong>: Read value is delayed by 1 cycle</li><li><strong>NB</strong>: Initial output value is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:undefined">undefined</a></code></li></ul><p>Additional helpful information:</p><ul><li>See <a href="CLaSH-Sized-Fixed.html#creatingdatafiles">CLaSH.Sized.Fixed</a> and <a href="CLaSH-Prelude-BlockRam.html#usingrams">CLaSH.Prelude.BlockRam</a>
 for ideas on how to use ROMs and RAMs</li></ul></div></div><div class="top"><p class="src"><a id="v:romPow2-39-" class="def">romPow2'</a> <a href="#v:romPow2-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc"><p><code>Clock</code> to synchronize to</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> (2 <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:-94-">^</a> n) a</td><td class="doc"><p>ROM content</p><p><strong>NB:</strong> must be a constant</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n)</td><td class="doc"><p>Read address <code>rd</code></p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</td><td class="doc"><p>The value of the ROM at address <code>rd</code></p></td></tr></table></div><div class="doc"><p>A ROM with a synchronous read port, with space for 2^<code>n</code> elements</p><ul><li><strong>NB</strong>: Read value is delayed by 1 cycle</li><li><strong>NB</strong>: Initial output value is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:undefined">undefined</a></code></li></ul><p>Additional helpful information:</p><ul><li>See <a href="CLaSH-Sized-Fixed.html#creatingdatafiles">CLaSH.Sized.Fixed</a> and <a href="CLaSH-Prelude-BlockRam.html#usingrams">CLaSH.Prelude.BlockRam</a>
 for ideas on how to use ROMs and RAMs</li></ul></div></div><h1 id="g:4">RAM primitives with a combinational read port</h1><div class="top"><p class="src"><a id="v:asyncRam-39-" class="def">asyncRam'</a> <a href="#v:asyncRam-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Enum">Enum</a> addr</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> wclk</td><td class="doc"><p><code>Clock</code> to which to synchronise the write
 port of the RAM</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> rclk</td><td class="doc"><p><code>Clock</code> to which the read address signal,
 <code>r</code>, is synchronised</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Promoted-Nat.html#t:SNat">SNat</a> n</td><td class="doc"><p>Size <code>n</code> of the RAM</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk addr</td><td class="doc"><p>Read address <code>r</code></p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (addr, a))</td><td class="doc"><p>(write address <code>w</code>, value to write)</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk a</td><td class="doc"><p>Value of the <code>RAM</code> at address <code>r</code></p></td></tr></table></div><div class="doc"><p>Create a RAM with space for <code>n</code> elements</p><ul><li><strong>NB</strong>: Initial content of the RAM is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:undefined">undefined</a></code></li></ul><p>Additional helpful information:</p><ul><li>See <a href="CLaSH-Prelude-BlockRam.html#usingrams">CLaSH.Prelude.BlockRam</a> for more information on how to use a
 RAM.</li></ul></div></div><div class="top"><p class="src"><a id="v:asyncRamPow2-39-" class="def">asyncRamPow2'</a> <a href="#v:asyncRamPow2-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> wclk</td><td class="doc"><p><code>Clock</code> to which to synchronise
 the write port of the RAM</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> rclk</td><td class="doc"><p><code>Clock</code> to which the read
 address signal, <code>r</code>, is
 synchronised</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n)</td><td class="doc"><p>Read address <code>r</code></p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> wclk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n, a))</td><td class="doc"><p>(write address <code>w</code>, value to write)</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> rclk a</td><td class="doc"><p>Value of the <code>RAM</code> at address <code>r</code></p></td></tr></table></div><div class="doc"><p>Create a RAM with space for 2^<code>n</code> elements</p><ul><li><strong>NB</strong>: Initial content of the RAM is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:undefined">undefined</a></code></li></ul><p>Additional helpful information:</p><ul><li>See <a href="CLaSH-Prelude-BlockRam.html#usingrams">CLaSH.Prelude.BlockRam</a> for more information on how to use a
 RAM.</li></ul></div></div><h1 id="g:5">BlockRAM primitives</h1><div class="top"><p class="src"><a id="v:blockRam-39-" class="def">blockRam'</a> <a href="#v:blockRam-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Enum">Enum</a> addr)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc"><p><code>Clock</code> to synchronize to</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> n a</td><td class="doc"><p>Initial content of the BRAM, also
 determines the size, <code>n</code>, of the BRAM.</p><p><strong>NB</strong>: <strong>MUST</strong> be a constant.</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk addr</td><td class="doc"><p>Read address <code>r</code></p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (addr, a))</td><td class="doc"><p>(write address <code>w</code>, value to write)</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</td><td class="doc"><p>Value of the <code>blockRAM</code> at address <code>r</code> from the previous clock
 cycle</p></td></tr></table></div><div class="doc"><p>Create a blockRAM with space for <code>n</code> elements</p><ul><li><strong>NB</strong>: Read value is delayed by 1 cycle</li><li><strong>NB</strong>: Initial output value is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:undefined">undefined</a></code></li></ul><pre>type ClkA = Clk &quot;A&quot; 100

clkA100 :: SClock ClkA
clkA100 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

bram40 :: <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA (<code><a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a></code> 6)
       -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA (Maybe (<code><a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a></code> 6, <code><a href="CLaSH-Sized-BitVector.html#v:Bit">Bit</a></code>))
       -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA <code><a href="CLaSH-Sized-BitVector.html#v:Bit">Bit</a></code>
bram40 = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:blockRam-39-">blockRam'</a></code> clkA100 (<code><a href="CLaSH-Sized-Vector.html#v:replicate">replicate</a></code> d40 1)
</pre><p>Additional helpful information:</p><ul><li>See <a href="CLaSH-Prelude-BlockRam.html#usingrams">CLaSH.Prelude.BlockRam</a> for more information on how to use a
 Block RAM.</li><li>Use the adapter <code><a href="CLaSH-Prelude-BlockRam.html#v:readNew-39-">readNew'</a></code> for obtaining write-before-read semantics like this: <code>readNew' clk (blockRam' clk inits) rd wrM</code>.</li></ul></div></div><div class="top"><p class="src"><a id="v:blockRamPow2-39-" class="def">blockRamPow2'</a> <a href="#v:blockRamPow2-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> n</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc"><p><code>Clock</code> to synchronize to</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Sized-Vector.html#t:Vec">Vec</a> (2 <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:-94-">^</a> n) a</td><td class="doc"><p>Initial content of the BRAM, also
 determines the size, <code>2^n</code>, of
 the BRAM.</p><p><strong>NB</strong>: <strong>MUST</strong> be a constant.</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n)</td><td class="doc"><p>Read address <code>r</code></p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a> n, a))</td><td class="doc"><p>(Write address <code>w</code>, value to write)</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</td><td class="doc"><p>Value of the <code>blockRAM</code> at address <code>r</code> from the previous
 clock cycle</p></td></tr></table></div><div class="doc"><p>Create a blockRAM with space for 2^<code>n</code> elements</p><ul><li><strong>NB</strong>: Read value is delayed by 1 cycle</li><li><strong>NB</strong>: Initial output value is <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:undefined">undefined</a></code></li></ul><pre>type ClkA = Clk &quot;A&quot; 100

clkA100 :: SClock ClkA
clkA100 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

bram32 :: <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA (<code><a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a></code> 5)
       -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA (Maybe (<code><a href="CLaSH-Sized-Internal-Unsigned.html#t:Unsigned">Unsigned</a></code> 5, <code><a href="CLaSH-Sized-BitVector.html#v:Bit">Bit</a></code>))
       -&gt; <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> ClkA <code><a href="CLaSH-Sized-BitVector.html#v:Bit">Bit</a></code>
bram32 = <code><a href="CLaSH-Prelude-Explicit-Safe.html#v:blockRamPow2-39-">blockRamPow2'</a></code> clkA100 (<code><a href="CLaSH-Sized-Vector.html#v:replicate">replicate</a></code> d32 1)
</pre><p>Additional helpful information:</p><ul><li>See <a href="CLaSH-Prelude-BlockRam.html#usingrams">CLaSH.Prelude.BlockRam</a> for more information on how to use a
 Block RAM.</li><li>Use the adapter <code><a href="CLaSH-Prelude-BlockRam.html#v:readNew-39-">readNew'</a></code> for obtaining write-before-read semantics like this: <code>readNew' clk (blockRamPow2' clk inits) rd wrM</code>.</li></ul></div></div><h1 id="g:6">Utility functions</h1><div class="top"><p class="src"><a id="v:isRising-39-" class="def">isRising'</a> <a href="#v:isRising-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Bounded">Bounded</a> a, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; a</td><td class="doc"><p>Starting value</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Give a pulse when the <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> goes from <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:minBound">minBound</a></code> to <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:maxBound">maxBound</a></code></p></div></div><div class="top"><p class="src"><a id="v:isFalling-39-" class="def">isFalling'</a> <a href="#v:isFalling-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Bounded">Bounded</a> a, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="CLaSH-Signal-Internal.html#t:SClock">SClock</a> clk</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; a</td><td class="doc"><p>Starting value</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a> clk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Give a pulse when the <code><a href="CLaSH-Signal-Internal.html#t:Signal-39-">Signal'</a></code> goes from <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:maxBound">maxBound</a></code> to <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#v:minBound">minBound</a></code></p></div></div><h1 id="g:7">Exported modules</h1><h2 id="g:8">Explicitly clocked synchronous signals</h2><div class="top"><p class="src">module <a href="CLaSH-Signal-Explicit.html">CLaSH.Signal.Explicit</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>