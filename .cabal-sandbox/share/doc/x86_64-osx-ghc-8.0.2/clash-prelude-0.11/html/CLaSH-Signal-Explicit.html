<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CLaSH.Signal.Explicit</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_CLaSH-Signal-Explicit.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">clash-prelude-0.11: CAES Language for Synchronous Hardware - Prelude library</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(C) 2013-2016 University of Twente</td></tr><tr><th>License</th><td>BSD2 (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>Christiaan Baaij &lt;christiaan.baaij@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr><tr><th>Extensions</th><td><ul class="extension-list"><li>MonoLocalBinds</li><li>GADTs</li><li>GADTSyntax</li><li>DataKinds</li><li>MagicHash</li></ul></td></tr></table><p class="caption">CLaSH.Signal.Explicit</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Explicitly clocked synchronous signal</a></li><li><a href="#g:2">Clock domain crossing</a><ul><li><a href="#g:3">Clock</a></li><li><a href="#g:4">Synchronisation primitive</a></li></ul></li><li><a href="#g:5">Basic circuit functions</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Clock">Clock</a> = <a href="#v:Clk">Clk</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:Nat">Nat</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:SClock">SClock</a> clk <span class="keyword">where</span><ul class="subs"><li><a href="#v:SClock">SClock</a> :: <a href="CLaSH-Promoted-Symbol.html#t:SSymbol">SSymbol</a> name -&gt; <a href="CLaSH-Promoted-Nat.html#t:SNat">SNat</a> period -&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> (<a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> name period)</li></ul></li><li class="src short"><a href="#v:sclock">sclock</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> name, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> period) =&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> (<a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> name period)</li><li class="src short"><a href="#v:withSClock">withSClock</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> name, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> period) =&gt; (<a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> (<a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> name period) -&gt; a) -&gt; a</li><li class="src short"><span class="keyword">type</span> <a href="#t:SystemClock">SystemClock</a> = <a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> &quot;system&quot; 1000</li><li class="src short"><a href="#v:systemClock">systemClock</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> <a href="CLaSH-Signal-Explicit.html#t:SystemClock">SystemClock</a></li><li class="src short"><a href="#v:freqCalc">freqCalc</a> :: [<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Integer">Integer</a>] -&gt; [<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Integer">Integer</a>]</li><li class="src short"><a href="#v:unsafeSynchronizer">unsafeSynchronizer</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk1 -&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk2 -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk1 a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk2 a</li><li class="src short"><a href="#v:register-39-">register'</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><a href="#v:registerMaybe-39-">registerMaybe'</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a</li><li class="src short"><a href="#v:regEn-39-">regEn'</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a</li></ul></div><div id="interface"><h1 id="g:1">Explicitly clocked synchronous signal</h1><div class="doc"><p><a id="relativeclocks"></a>
C&#955;aSH supports explicitly clocked <code><a href="CLaSH.html#v:Signal">Signal</a></code>s in the form of:</p><pre><code><a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a></code> (clk :: <code><a href="CLaSH-Signal-Explicit.html#t:Clock">Clock</a></code>) a
</pre><p>Where <code>a</code> is the type of the elements, and <code>clk</code> is the clock to which the
signal is synchronised. The type-parameter, <code>clk</code>, is of the kind <code><a href="CLaSH-Signal-Explicit.html#t:Clock">Clock</a></code> which
has types of the following shape:</p><pre>Clk {- name :: -} <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:Symbol">Symbol</a></code> {- period :: -} <code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:Nat">Nat</a></code>
</pre><p>Where <code>name</code> is a type-level string (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:Symbol">Symbol</a></code>) representing the the
name of the clock, and <code>period</code> is a type-level natural number (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:Nat">Nat</a></code>)
representing the clock period. Two concrete instances of a <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> could be:</p><pre>type ClkA500  = Clk &quot;A500&quot; 500
type ClkB3250 = Clk &quot;B3250&quot; 3250</pre><p>The periods of these clocks are however dimension-less, they do not refer to any
explicit time-scale (e.g. nano-seconds). The reason for the lack of an explicit
time-scale is that the C&#955;aSH compiler would not be able guarantee that the
circuit can run at the specified frequency. The clock periods are just there to
indicate relative frequency differences between two different clocks. That is, a
signal:</p><pre><code><a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a></code> ClkA500 a
</pre><p>is synchronized to a clock that runs 6.5 times faster than the clock to which
the signal:</p><pre><code><a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a></code> ClkB3250 a
</pre><p>is synchronized to.</p><ul><li><strong>NB</strong>: &quot;Bad things&quot;&#8482;  happen when you actually use a clock period of <code>0</code>,
so do <strong>not</strong> do that!</li><li><strong>NB</strong>: You should be judicious using a clock with period of <code>1</code> as you can
never create a clock that goes any faster!</li></ul></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Signal-39-" class="def">Signal'</a> clk a <a href="#t:Signal-39-" class="selflink">#</a></p><div class="doc"><p>A synchronized signal with samples of type <code>a</code>, explicitly synchronized to
 a clock <code>clk</code></p><p><strong>NB</strong>: The constructor, <code>(<code><a href="CLaSH-Signal-Internal.html#v::-45-">:-</a></code>)</code>, is <strong>not</strong> synthesisable.</p></div><div class="subs instances"><p id="control.i:Signal-39-" class="caption collapser" onclick="toggleSection('i:Signal-39-')">Instances</p><div id="section.i:Signal-39-" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Functor:1" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Functor:1')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Functor:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Applicative:2" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Applicative:2')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Applicative:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk (a -&gt; b) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Foldable:3" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Foldable:3')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Foldable.html#t:Foldable">Foldable</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc"><p><strong>NB</strong>: Not synthesisable</p><p><strong>NB</strong>: In &quot;<code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Foldable.html#v:foldr">foldr</a></code> f z s</code>&quot;:</p><ul><li>The function <code>f</code> should be <em>lazy</em> in its second argument.</li><li>The <code>z</code> element will never be used.</li></ul></td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Foldable:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fold">fold</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Monoid.html#t:Monoid">Monoid</a> m =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk m -&gt; m <a href="#v:fold" class="selflink">#</a></p><p class="src"><a href="#v:foldMap">foldMap</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Monoid.html#t:Monoid">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; m <a href="#v:foldMap" class="selflink">#</a></p><p class="src"><a href="#v:foldr">foldr</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; b <a href="#v:foldr" class="selflink">#</a></p><p class="src"><a href="#v:foldr-39-">foldr'</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; b <a href="#v:foldr-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldl">foldl</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; b <a href="#v:foldl" class="selflink">#</a></p><p class="src"><a href="#v:foldl-39-">foldl'</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; b <a href="#v:foldl-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldr1">foldr1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; a <a href="#v:foldr1" class="selflink">#</a></p><p class="src"><a href="#v:foldl1">foldl1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; a <a href="#v:foldl1" class="selflink">#</a></p><p class="src"><a href="#v:toList">toList</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; [a] <a href="#v:toList" class="selflink">#</a></p><p class="src"><a href="#v:null">null</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:null" class="selflink">#</a></p><p class="src"><a href="#v:length">length</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a> <a href="#v:length" class="selflink">#</a></p><p class="src"><a href="#v:elem">elem</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> a =&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:elem" class="selflink">#</a></p><p class="src"><a href="#v:maximum">maximum</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ord.html#t:Ord">Ord</a> a =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; a <a href="#v:maximum" class="selflink">#</a></p><p class="src"><a href="#v:minimum">minimum</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Ord.html#t:Ord">Ord</a> a =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; a <a href="#v:minimum" class="selflink">#</a></p><p class="src"><a href="#v:sum">sum</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Num">Num</a> a =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; a <a href="#v:sum" class="selflink">#</a></p><p class="src"><a href="#v:product">product</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Num">Num</a> a =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; a <a href="#v:product" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Traversable:4" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Traversable:4')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Traversable.html#t:Traversable">Traversable</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Traversable:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:traverse">traverse</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; (a -&gt; f b) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; f (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b) <a href="#v:traverse" class="selflink">#</a></p><p class="src"><a href="#v:sequenceA">sequenceA</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk (f a) -&gt; f (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a) <a href="#v:sequenceA" class="selflink">#</a></p><p class="src"><a href="#v:mapM">mapM</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; m (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk b) <a href="#v:mapM" class="selflink">#</a></p><p class="src"><a href="#v:sequence">sequence</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk (m a) -&gt; m (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a) <a href="#v:sequence" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Fractional:5" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Fractional:5')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Fractional">Fractional</a> a =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Fractional">Fractional</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Fractional:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-47-">(/)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:-47-" class="selflink">#</a></p><p class="src"><a href="#v:recip">recip</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:recip" class="selflink">#</a></p><p class="src"><a href="#v:fromRational">fromRational</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Rational">Rational</a> -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:fromRational" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Num:6" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Num:6')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Num">Num</a> a =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Num">Num</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Num:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-43-">(+)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:-43-" class="selflink">#</a></p><p class="src"><a href="#v:-45-">(-)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:-45-" class="selflink">#</a></p><p class="src"><a href="#v:-42-">(*)</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:-42-" class="selflink">#</a></p><p class="src"><a href="#v:negate">negate</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:negate" class="selflink">#</a></p><p class="src"><a href="#v:abs">abs</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:abs" class="selflink">#</a></p><p class="src"><a href="#v:signum">signum</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:signum" class="selflink">#</a></p><p class="src"><a href="#v:fromInteger">fromInteger</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:fromInteger" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Show:7" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Show:7')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:Show">Show</a> a =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:Show">Show</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Show:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a] -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Lift:8" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Lift:8')"></span> <a href="CLaSH-Prelude.html#t:Lift">Lift</a> a =&gt; <a href="CLaSH-Prelude.html#t:Lift">Lift</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Lift:8" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/template-haskell-2.11.1.0/Language-Haskell-TH-Syntax.html#t:Q">Q</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/template-haskell-2.11.1.0/Language-Haskell-TH-Syntax.html#t:Exp">Exp</a> <a href="#v:lift" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Arbitrary:9" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Arbitrary:9')"></span> <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Arbitrary.html#t:Arbitrary">Arbitrary</a> a =&gt; <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Arbitrary.html#t:Arbitrary">Arbitrary</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Arbitrary:9" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Gen.html#t:Gen">Gen</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a) <a href="#v:arbitrary" class="selflink">#</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; [<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a] <a href="#v:shrink" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:CoArbitrary:10" class="instance expander" onclick="toggleSection('i:id:Signal-39-:CoArbitrary:10')"></span> <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Arbitrary.html#t:CoArbitrary">CoArbitrary</a> a =&gt; <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Arbitrary.html#t:CoArbitrary">CoArbitrary</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:CoArbitrary:10" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:coarbitrary">coarbitrary</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Gen.html#t:Gen">Gen</a> b -&gt; <a href="file:///Library/Haskell/ghc-8.0.2-x86_64/lib/QuickCheck-2.9.2/doc/html/Test-QuickCheck-Gen.html#t:Gen">Gen</a> b <a href="#v:coarbitrary" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Signal-39-:Default:11" class="instance expander" onclick="toggleSection('i:id:Signal-39-:Default:11')"></span> <a href="file:///Users/william/Documents/Projects/HMath/.cabal-sandbox/share/doc/x86_64-osx-ghc-8.0.2/data-default-0.7.1.1/html/Data-Default.html#t:Default">Default</a> a =&gt; <a href="file:///Users/william/Documents/Projects/HMath/.cabal-sandbox/share/doc/x86_64-osx-ghc-8.0.2/data-default-0.7.1.1/html/Data-Default.html#t:Default">Default</a> (<a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a)</span> <a href="#t:Signal-39-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Signal-39-:Default:11" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:def">def</a> :: <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:def" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:2">Clock domain crossing</h1><h2 id="g:3">Clock</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Clock" class="def">Clock</a> <a href="#t:Clock" class="selflink">#</a></p><div class="doc"><p>A clock with a name (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a></code>) and period (<code><a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:Nat">Nat</a></code>)</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Clk" class="def">Clk</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:Nat">Nat</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SClock" class="def">SClock</a> clk <span class="keyword">where</span> <a href="#t:SClock" class="selflink">#</a></p><div class="doc"><p>Singleton value for a type-level <code><a href="CLaSH-Signal-Explicit.html#t:Clock">Clock</a></code> with the given <code>name</code> and <code>period</code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SClock" class="def">SClock</a> :: <a href="CLaSH-Promoted-Symbol.html#t:SSymbol">SSymbol</a> name -&gt; <a href="CLaSH-Promoted-Nat.html#t:SNat">SNat</a> period -&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> (<a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> name period)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:SClock" class="caption collapser" onclick="toggleSection('i:SClock')">Instances</p><div id="section.i:SClock" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:SClock:Show:1" class="instance expander" onclick="toggleSection('i:id:SClock:Show:1')"></span> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:Show">Show</a> (<a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk)</span> <a href="#t:SClock" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:SClock:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk] -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:sclock" class="def">sclock</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> name, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> period) =&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> (<a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> name period) <a href="#v:sclock" class="selflink">#</a></p><div class="doc"><p>Create a singleton clock</p><pre>type ClkA = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;A&quot; 100

clkA :: <code><a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a></code> ClkA
clkA = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>
</pre></div></div><div class="top"><p class="src"><a id="v:withSClock" class="def">withSClock</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> name, <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:KnownNat">KnownNat</a> period) =&gt; (<a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> (<a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> name period) -&gt; a) -&gt; a <a href="#v:withSClock" class="selflink">#</a></p><div class="doc"><p>Supply a function with a singleton clock <code>clk</code> according to the context</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SystemClock" class="def">SystemClock</a> = <a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a> &quot;system&quot; 1000 <a href="#t:SystemClock" class="selflink">#</a></p><div class="doc"><p>The standard system clock with a period of 1000</p></div></div><div class="top"><p class="src"><a id="v:systemClock" class="def">systemClock</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> <a href="CLaSH-Signal-Explicit.html#t:SystemClock">SystemClock</a> <a href="#v:systemClock" class="selflink">#</a></p><div class="doc"><p>The singleton clock for <code><a href="CLaSH-Signal-Explicit.html#t:SystemClock">SystemClock</a></code></p></div></div><div class="top"><p class="src"><a id="v:freqCalc" class="def">freqCalc</a> :: [<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Integer">Integer</a>] -&gt; [<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Prelude.html#t:Integer">Integer</a>] <a href="#v:freqCalc" class="selflink">#</a></p><div class="doc"><p>Calculate relative periods given a list of frequencies.</p><p>So for example, you have one part of your design connected to an ADC running
 at 20 MHz, one part of your design connected to a DAC running at 36 MHz, and
 the rest of your system is running at 50 MHz. What are the relative
 (integer) clock periods in C&#955;aSH, such that their ratios correspond to the
 ratios between the actual clock frequencies.</p><p>For this we use <code><a href="CLaSH-Signal-Explicit.html#v:freqCalc">freqCalc</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>freqCalc [20,36,50]
</code></strong>[45,25,18]
</pre><p>So that we create the proper clocks:</p><pre>type ADC20 = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;ADC&quot; 45
type DAC36 = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;DAC&quot; 25
type Sys50 = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;Sys&quot; 18

sys50 :: SClock Sys50
sys50 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

adc20 :: SClock ADC20
adc20 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

dac36 :: SClock DAC36
dac36 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>
</pre><p><strong>NB</strong>: This function is <em>not</em> synthesisable</p></div></div><h2 id="g:4">Synchronisation primitive</h2><div class="top"><p class="src"><a id="v:unsafeSynchronizer" class="def">unsafeSynchronizer</a> <a href="#v:unsafeSynchronizer" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk1</td><td class="doc"><p><code><a href="CLaSH-Signal-Explicit.html#t:Clock">Clock</a></code> of the incoming signal</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk2</td><td class="doc"><p><code><a href="CLaSH-Signal-Explicit.html#t:Clock">Clock</a></code> of the outgoing signal</p></td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk1 a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk2 a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> function is a primitive that must be used to
 connect one clock domain to the other, and will be synthesised to a (bundle
 of) wire(s) in the eventual circuit. This function should only be used as
 part of a proper synchronisation component, such as the following dual
 flip-flop synchronizer:</p><pre>dualFlipFlop :: SClock clkA -&gt; SClock clkB
             -&gt; Signal' clkA Bit -&gt; Signal' clkB Bit
dualFlipFlop clkA clkB = <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clkB low . <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clkB low
                       . <code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> clkA clkB
</pre><p>The <code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> works in such a way that, given 2 clocks:</p><pre>type Clk7 = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;clk7&quot; 7

clk7 :: <code><a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a></code> Clk7
clk7 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>
</pre><p>and</p><pre>type Clk2 = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;clk2&quot; 2

clk2 :: <code><a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a></code> Clk2
clk2 = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>
</pre><p>Oversampling followed by compression is the identity function plus 2 initial
 values:</p><pre><code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk7 i $
<code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> clk2 clk7 $
<code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk2 j $
<code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> clk7 clk2 $
<code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk7 k s

==

i :- j :- s
</pre><p>Something we can easily observe:</p><pre>oversampling = <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk2 99 . <code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> clk7 clk2
             . <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk7 50
almostId     = <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk7 70 . <code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> clk2 clk7
             . <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk2 99 . <code><a href="CLaSH-Signal-Explicit.html#v:unsafeSynchronizer">unsafeSynchronizer</a></code> clk7 clk2
             . <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clk7 50
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sampleN 37 (oversampling (fromList [1..10]))
</code></strong>[99,50,1,1,1,2,2,2,2,3,3,3,4,4,4,4,5,5,5,6,6,6,6,7,7,7,8,8,8,8,9,9,9,10,10,10,10]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sampleN 12 (almostId (fromList [1..10]))
</code></strong>[70,99,1,2,3,4,5,6,7,8,9,10]
</pre></div></div><h1 id="g:5">Basic circuit functions</h1><div class="top"><p class="src"><a id="v:register-39-" class="def">register'</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:register-39-" class="selflink">#</a></p><div class="doc"><p>&quot;<code><code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> i s</code>&quot; delays the values in <code><a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a></code> <code>s</code> for one cycle,
 and sets the value at time 0 to <code>i</code></p><pre>type ClkA = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;A&quot; 100

clkA :: <code><a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a></code> ClkA
clkA = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sampleN 3 (register' clkA 8 (fromList [1,2,3,4]))
</code></strong>[8,1,2]
</pre></div></div><div class="top"><p class="src"><a id="v:registerMaybe-39-" class="def">registerMaybe'</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk (<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:registerMaybe-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:regEn-39-" class="def">regEn'</a> :: <a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a> clk -&gt; a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a -&gt; <a href="CLaSH-Signal-Explicit.html#t:Signal-39-">Signal'</a> clk a <a href="#v:regEn-39-" class="selflink">#</a></p><div class="doc"><p>Version of <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> that only updates its content when its third
 argument is asserted. So given:</p><pre>type ClkA = <code><a href="CLaSH-Signal-Explicit.html#v:Clk">Clk</a></code> &quot;A&quot; 100
clkA :: <code><a href="CLaSH-Signal-Explicit.html#t:SClock">SClock</a></code> ClkA
clkA = <code><a href="CLaSH-Signal-Explicit.html#v:sclock">sclock</a></code>

oscillate = <code><a href="CLaSH-Signal-Explicit.html#v:register-39-">register'</a></code> clkA False (<code><a href="CLaSH-Signal.html#v:not1">not1</a></code> oscillate)
count     = <code><a href="CLaSH-Signal-Explicit.html#v:regEn-39-">regEn'</a></code> clkA 0 oscillate (count + 1)
</pre><p>We get:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sampleN 8 oscillate
</code></strong>[False,True,False,True,False,True,False,True]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sampleN 8 count
</code></strong>[0,0,1,1,2,2,3,3]
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>